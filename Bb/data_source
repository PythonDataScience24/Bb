import sqlite3
import requests
from serpapi import GoogleSearch


# Establish connection to SQLite database
conn = sqlite3.connect('my_database.db')
cursor = conn.cursor()

# Retrieve data from API
response = requests.get('https://serpapi.com/search?engine=google_scholar')
data = response.json()

# Define table schema and create table
cursor.execute(''' google_scholar_table  (
                    id INTEGER PRIMARY KEY,
                    name TEXT,
                    age INTEGER
                  )''')

# Insert data into table
for item in data:
    cursor.execute('''INSERT INTO my_table (name, age) VALUES (?, ?)''', (item['name'], item['age']))

# Commit changes and close connection
conn.commit()
conn.close()
